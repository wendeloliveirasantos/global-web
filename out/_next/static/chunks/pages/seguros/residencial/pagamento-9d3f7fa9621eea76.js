(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2583],{1238:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/seguros/residencial/pagamento",function(){return a(8591)}])},8591:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return b}});var t=a(5893),s=a(1793),o=a(8367),n=a(9373),i=a(4890),d=a(6159),u=a(1064),c=a(8677),l=a(8115),p=a(5018),m=a(9279),h=a(3780),f=a(7516),x=a(5582),g=a(1163),y=a(7294);function b(){var e;let r=(0,g.useRouter)(),[a,b]=(0,y.useState)(!1),[,N]=(0,m._)(p.zP,""),{oferta:_,titular:j,cotacao:C}=(0,h.Z)(),[E,v]=y.useState(!1),[w,O]=(0,y.useState)("");async function R(e){try{b(!0);let a={quoteId:_.id,productReferenceId:JSON.stringify(_.productReferenceId),provider:_.operator,holder:{firstName:j.firstName,lastName:j.lastName,gender:"",cpfNumber:j.document,cellPhone:j.phone.replace(" ",""),birthDate:j.birthDate,email:j.email,address:j.address,number:j.number,city:j.city,neighborhood:j.neighborhood,uf:j.state,country:"BR",zipCode:j.postalCode.replace(" ","")},payment:{cardholderName:e.nomeTitular,cardholderCPF:e.cpfTitular,cardNumber:e.numeroCartao,securityCode:e.cvv,expiryMonth:e.mesValidade,expiryYear:e.anoValidade,installments:e.parcelas,operator:"mastercard"}},t=await f.Z.post("/hybrids/purchases",a);201==t.status?(N(JSON.stringify(t.data)),r.push("/seguros/residencial/concluido"),b(!1)):(b(!1),v(!0),O(t.data.message))}catch(e){throw b(!1),Error()}}return a?(0,t.jsx)(o.Z,{}):_&&(0,t.jsx)(u.Z,{children:(0,t.jsx)(x.Z,{maxWidth:"xl",children:(0,t.jsx)(s.im,{style:{flex:1},background:"/images/city.png",children:(0,t.jsxs)(s.Yx,{style:{display:"flex"},children:[(0,t.jsx)(n.V,{bold:"Dados para",regular:"pagamento"}),(0,t.jsx)(i.Z,{regular:"Verifique se as informa\xe7\xf5es do seguro est\xe3o corretas. Caso necess\xe1rio, voc\xea pode voltar e atualizar os dados do titular do cart\xe3o."}),(0,t.jsx)(d.Y,{onSubmit:R,amount:null!==(e=_.amount)&&void 0!==e?e:0,business:"residencial"}),(0,t.jsx)(l.V,{title:"ERRO AO PROCESSAR PAGAMENTO",text:w,open:E,onClose:()=>v(!1)}),(0,t.jsx)(c.$,{step:75})]})})})})}}},function(e){e.O(0,[3365,3961,6036,4810,9067,4965,3170,5477,1064,655,1793,2566,2888,9774,179],function(){return e(e.s=1238)}),_N_E=e.O()}]);