(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8879],{4686:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/seguros/hibrido/pagamento",function(){return t(6058)}])},6058:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return y}});var a=t(5893),o=t(1793),s=t(8367),i=t(9373),n=t(4890),d=t(6159),u=t(1064),c=t(8677),l=t(8115),p=t(5018),h=t(9279),m=t(3780),f=t(7516),b=t(5582),x=t(1163),g=t(7294);function y(){var e;let r=(0,x.useRouter)(),[t,y]=(0,g.useState)(!1),[,N]=(0,h._)(p.zP,""),{oferta:_,titular:j,cotacao:C}=(0,m.Z)(),[E,v]=g.useState(!1),[w,O]=(0,g.useState)("");async function R(e){try{y(!0);let t={quoteId:_.id,productReferenceId:JSON.stringify(_.productReferenceId),provider:_.operator,holder:{firstName:j.firstName,lastName:j.lastName,gender:"",cpfNumber:j.document,cellPhone:j.phone.replace(" ",""),birthDate:j.birthDate,email:j.email,address:j.address,number:j.number,city:j.city,neighborhood:j.neighborhood,uf:j.state,country:"BR",zipCode:j.postalCode.replace(" ","")},payment:{cardholderName:e.nomeTitular,cardholderCPF:e.cpfTitular,cardNumber:e.numeroCartao,securityCode:e.cvv,expiryMonth:e.mesValidade,expiryYear:e.anoValidade,installments:e.parcelas,operator:"mastercard"}},a=await f.Z.post("/hybrids/purchases",t);201==a.status?(N(JSON.stringify(a.data)),r.push("/seguros/hibrido/concluido"),y(!1)):(y(!1),v(!0),O(a.data.message))}catch(e){throw y(!1),Error()}}return t?(0,a.jsx)(s.Z,{}):_&&(0,a.jsx)(u.Z,{children:(0,a.jsx)(b.Z,{maxWidth:"xl",children:(0,a.jsx)(o.im,{style:{flex:1},background:"/images/city.png",children:(0,a.jsxs)(o.Yx,{style:{display:"flex"},children:[(0,a.jsx)(i.V,{bold:"Dados para",regular:"pagamento"}),(0,a.jsx)(n.Z,{regular:"Verifique se as informa\xe7\xf5es do seguro est\xe3o corretas. Caso necess\xe1rio, voc\xea pode voltar e atualizar os dados do titular do cart\xe3o."}),(0,a.jsx)(d.Y,{onSubmit:R,amount:null!==(e=_.amount)&&void 0!==e?e:0,business:"hibrido"}),(0,a.jsx)(l.V,{title:"ERRO AO PROCESSAR PAGAMENTO",text:w,open:E,onClose:()=>v(!1)}),(0,a.jsx)(c.$,{step:75})]})})})})}}},function(e){e.O(0,[3365,3961,6036,4810,9067,4965,3170,5477,1064,655,1793,2566,2888,9774,179],function(){return e(e.s=4686)}),_N_E=e.O()}]);