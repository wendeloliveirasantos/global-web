(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2974],{1071:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/seguros/acidentes-pessoais/pagamento",function(){return t(1486)}])},1486:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return b}});var r=t(5893),s=t(1793),o=t(8367),n=t(9373),i=t(4890),d=t(6159),u=t(1064),c=t(8677),l=t(8115),p=t(5018),m=t(9279),h=t(3780),f=t(7516),x=t(5582),g=t(1163),y=t(7294);function b(){var e;let a=(0,g.useRouter)(),[t,b]=(0,y.useState)(!1),[,N]=(0,m._)(p.zP,""),{oferta:_,titular:j,cotacao:C}=(0,h.Z)(),[E,v]=y.useState(!1),[w,O]=(0,y.useState)("");async function P(e){try{b(!0);let t={quoteId:_.id,productReferenceId:JSON.stringify(_.productReferenceId),provider:_.operator,holder:{firstName:j.firstName,lastName:j.lastName,gender:"",cpfNumber:j.document,cellPhone:j.phone.replace(" ",""),birthDate:j.birthDate,email:j.email,address:j.address,number:j.number,city:j.city,neighborhood:j.neighborhood,uf:j.state,country:"BR",zipCode:j.postalCode.replace(" ","")},payment:{cardholderName:e.nomeTitular,cardholderCPF:e.cpfTitular,cardNumber:e.numeroCartao,securityCode:e.cvv,expiryMonth:e.mesValidade,expiryYear:e.anoValidade,installments:e.parcelas,operator:"mastercard"}},r=await f.Z.post("/hybrids/purchases",t);201==r.status?(N(JSON.stringify(r.data)),a.push("/seguros/acidentes-pessoais/concluido"),b(!1)):(b(!1),v(!0),O(r.data.message))}catch(e){throw b(!1),Error()}}return t?(0,r.jsx)(o.Z,{}):_&&(0,r.jsx)(u.Z,{children:(0,r.jsx)(x.Z,{maxWidth:"xl",children:(0,r.jsx)(s.im,{style:{flex:1},background:"/images/city.png",children:(0,r.jsxs)(s.Yx,{style:{display:"flex"},children:[(0,r.jsx)(n.V,{bold:"Dados para",regular:"pagamento"}),(0,r.jsx)(i.Z,{regular:"Verifique se as informa\xe7\xf5es do seguro est\xe3o corretas. Caso necess\xe1rio, voc\xea pode voltar e atualizar os dados do titular do cart\xe3o."}),(0,r.jsx)(d.Y,{onSubmit:P,amount:null!==(e=_.amount)&&void 0!==e?e:0,business:"acidentesPessoais"}),(0,r.jsx)(l.V,{title:"ERRO AO PROCESSAR PAGAMENTO",text:w,open:E,onClose:()=>v(!1)}),(0,r.jsx)(c.$,{step:75})]})})})})}}},function(e){e.O(0,[3365,3961,6036,4810,9067,4965,3170,5477,1064,655,1793,2566,2888,9774,179],function(){return e(e.s=1071)}),_N_E=e.O()}]);